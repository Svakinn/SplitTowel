define(["require","exports","config","services/logger"],function(e,t,o,i){var n=o,r=i,s=function(){function e(){this.loadArray=ko.observableArray(),this.isLoading=ko.observable(!1),this.configBreezeManager()}return e.prototype.pushLoader=function(){this.loadArray.push("."),this.isLoading()||this.isLoading(!0)},e.prototype.popLoader=function(){this.loadArray.pop(),this.isLoading(this.loadArray().length>0)},e.prototype.configBreezeManager=function(){this.Manager=new breeze.EntityManager(n.cfg.breezeServiceName),breeze.NamingConvention.none.setAsDefault()},e.prototype.HandleExceptions=function(e,t){r.logger.logError(e.message,e,t,!0)},e.prototype.getCountries=function(e){function t(t){if(e&&t.results){var o=new Array,n=t.results.length;if(n>0)for(var r=0;n>r;r++)o.push({id:t.results[r].Id,name:t.results[r].Name,toolTip:t.results[r].ToolTip});e(o)}return console.log("Got our coutries"),i.popLoader(),Q(!0)}function o(e){return i.popLoader(),i.HandleExceptions(e,"GetCountries"),Q(!1)}var i=this;i.pushLoader();var n=breeze.EntityQuery.from("GetCountries");return i.Manager.executeQuery(n).then(t).fail(o)},e}();t.DataService=s,t.ctx=new s});