define(["require","exports","config","services/logger"],function(e,t,n,i){var r=n,o=i,a=function(){function e(){this.loadArray=ko.observableArray(),this.isLoading=ko.observable(!1),this.configBreezeManager()}return e.prototype.pushLoader=function(){this.loadArray.push("."),this.isLoading()||this.isLoading(!0)},e.prototype.popLoader=function(){this.loadArray.pop(),this.isLoading(this.loadArray().length>0)},e.prototype.configBreezeManager=function(){this.Manager=new breeze.EntityManager(r.cfg.breezeServiceName),breeze.NamingConvention.none.setAsDefault()},e.prototype.HandleExceptions=function(e,t){o.logger.logError(e.message,e,t,!0)},e.prototype.getCountries=function(e){function t(t){if(e&&t.results){var n=new Array,r=t.results.length;if(r>0)for(var o=0;r>o;o++)n.push({id:t.results[o].Id,name:t.results[o].Name,toolTip:t.results[o].ToolTip});e(n)}return console.log("Got our coutries"),i.popLoader(),Q(!0)}function n(e){return i.popLoader(),i.HandleExceptions(e,"GetCountries"),Q(!1)}var i=this;i.pushLoader();var r=breeze.EntityQuery.from("GetCountries");return i.Manager.executeQuery(r).then(t).fail(n)},e}();t.DataService=a,t.ctx=new a});